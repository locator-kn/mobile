<ion-view view-title="Messenger" class="messages messenger-container" ng-controller="MessagesCtrl as mc">
    <ion-content class="background-color-grey">
        <ion-refresher
            pulling-text="Pull to refresh..."
            on-refresh="mc.loadMore()">
        </ion-refresher>
        <div ng-if="authenticated">
            <div>

                <div class="content">

                    <ion-list>
                        <div ng-class="{'out' : message.from === userID}" class="message"
                             ng-repeat="message in mc.messages">
                            <p><span ng-bind-html="message.message | emoji" class="message-content"></span>
                                <!--<span class="since">{{mc.since(message.create_date)}}</span></span>-->
                                <span class="bubble"></span>
                            </p>
                        </div>
                    </ion-list>
                </div>
            </div>
        </div>
        <div ng-if="!authenticated">
            Bitte zuerst Registrieren!
        </div>
    </ion-content>
    <div class="list list-inset bottom">
        <label class="item item-input">
            <input type="text" ng-enter="mc.sendMessage(message)" ng-model="message" placeholder="Schreib etwas...">
        </label>
        <button class="button" ng-click="mc.sendMessage(message)" ng-disabled="!message">
            Senden
        </button>
    </div>
</ion-view>
